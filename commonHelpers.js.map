{"version":3,"file":"commonHelpers.js","sources":["../src/js/options.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const baseIziToastOptions = {\n  error: {\n    position: 'topRight',\n    class: 'error',\n    color: 'white',\n    timeout: 3000,\n  },\n};\n\nexport const MASSAGES = {\n  loading: 'Loading images, please wait...',\n  no_data: 'Sorry, there are no images matching your search query. Please try again!',\n  request_error: 'Error during requesting',\n};\n\nexport const iziToastOptions = {\n  error_no_data: {\n    message: MASSAGES.no_data,\n    ...baseIziToastOptions.error,\n  },\n  request_error: {\n    message: MASSAGES.request_error,\n    ...baseIziToastOptions.error,\n  },\n};","export function getLoader(text) {\n  const loader = document.createElement('div');\n  loader.textContent = text;\n  loader.classList.add('loader');\n\n  return loader;\n}\n\nexport function getImagesEl(imagesList) {\n  return imagesList.reduce((string, element) => {\n    string += getImageEl(element);\n    return string;\n  }, '');\n}\n\nfunction getImageEl(image) {\n  const {\n    webformatURL: previewSrc,\n    largeImageURL: originalSrc,\n    tags: alt,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n\n  return `\n    <div class=\"image\">\n      <a class=\"image-link\" href=\"${originalSrc}\">\n        <div class=\"image-photo-wrap\"><img class=\"image-photo\" src=\"${previewSrc}\" data-source=\"${originalSrc}\" alt=\"${alt}\"/></div>\n        <div class=\"image-data\">\n          <div class=\"image-data-item image-data-item-likes\"><div class=\"image-data-item-label\">Likes</div><div class=\"image-data-item-number\">${likes}</div></div>\n          <div class=\"image-data-item image-data-item-views\"><div class=\"image-data-item-label\">Views</div><div class=\"image-data-item-number\">${views}</div></div>\n          <div class=\"image-data-item image-data-item-comments\"><div class=\"image-data-item-label\">Comments</div><div class=\"image-data-item-number\">${comments}</div></div>\n          <div class=\"image-data-item image-data-item-downloads\"><div class=\"image-data-item-label\">Downloads</div><div class=\"image-data-item-number\">${downloads}</div></div>\n      </div>\n      </a>\n    </div>\n  `;\n}","import { MASSAGES, iziToastOptions } from './options.js';\nimport { getImagesEl } from './render-functions.js';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nlet lightbox;\n\nfunction fetchPixabay(searchString, options = {}) {\n  const params = new URLSearchParams({\n    key: '43799735-9794f2fe47020c8ff64ba54b4',\n    q: searchString,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const { loaderEl, imagesEl } = options;\n\n  const url = `https://pixabay.com/api/?${params}`;\n\n  fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw MASSAGES.request_error;\n      }\n\n      return response.json();\n    })\n    .then(images => {\n      if (images.total < 1) {\n        iziToast.error(iziToastOptions.error_no_data);\n        loaderEl.remove();\n        return;\n      }\n\n      imagesEl.innerHTML = getImagesEl(images.hits);\n      loaderEl.remove();\n\n      if (lightbox) {\n        lightbox.refresh();\n      } else {\n        lightbox = new SimpleLightbox('#images .image-link', {\n          captions: true,\n          captionsData: 'alt',\n          captionPosition: 'bottom',\n          captionDelay: 250,\n        });\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n      iziToast.error(iziToastOptions.request_error);\n      loaderEl.remove();\n    });\n}\n\nexport default fetchPixabay;","import { MASSAGES } from './js/options.js';\nimport { getLoader } from './js/render-functions.js';\nimport fetchPixabay from './js/pixabay-api.js';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\ndocument.addEventListener('DOMContentLoaded', event => {\n  const formEl = document.querySelector('#search-form');\n  const loaderEl = getLoader(MASSAGES.loading);\n  const imagesEl = document.querySelector('#images');\n\n  formEl.addEventListener('submit', event => {\n    event.preventDefault();\n    const searchString = formEl.querySelector('input[name=\"search\"]').value;\n    imagesEl.innerHTML = '';\n    formEl.after(loaderEl);\n\n    fetchPixabay(searchString, {\n      loaderEl: loaderEl,\n      imagesEl: imagesEl,\n    });\n\n    formEl.reset();\n  });\n});"],"names":["baseIziToastOptions","MASSAGES","iziToastOptions","getLoader","text","loader","getImagesEl","imagesList","string","element","getImageEl","image","previewSrc","originalSrc","alt","likes","views","comments","downloads","lightbox","fetchPixabay","searchString","options","params","loaderEl","imagesEl","url","response","images","iziToast","SimpleLightbox","error","event","formEl"],"mappings":"6vBAAA,MAAMA,EAAsB,CAC1B,MAAO,CACL,SAAU,WACV,MAAO,QACP,MAAO,QACP,QAAS,GACV,CACH,EAEaC,EAAW,CACtB,QAAS,iCACT,QAAS,2EACT,cAAe,yBACjB,EAEaC,EAAkB,CAC7B,cAAe,CACb,QAASD,EAAS,QAClB,GAAGD,EAAoB,KACxB,EACD,cAAe,CACb,QAASC,EAAS,cAClB,GAAGD,EAAoB,KACxB,CACH,ECxBO,SAASG,EAAUC,EAAM,CAC9B,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3C,OAAAA,EAAO,YAAcD,EACrBC,EAAO,UAAU,IAAI,QAAQ,EAEtBA,CACT,CAEO,SAASC,EAAYC,EAAY,CACtC,OAAOA,EAAW,OAAO,CAACC,EAAQC,KAChCD,GAAUE,EAAWD,CAAO,EACrBD,GACN,EAAE,CACP,CAEA,SAASE,EAAWC,EAAO,CACzB,KAAM,CACJ,aAAcC,EACd,cAAeC,EACf,KAAMC,EACN,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA;AAAA,oCAE2BE,CAAW;AAAA,sEACuBD,CAAU,kBAAkBC,CAAW,UAAUC,CAAG;AAAA;AAAA,iJAEuBC,CAAK;AAAA,iJACLC,CAAK;AAAA,uJACCC,CAAQ;AAAA,yJACNC,CAAS;AAAA;AAAA;AAAA;AAAA,GAKlK,CCjCA,IAAIC,EAEJ,SAASC,EAAaC,EAAcC,EAAU,GAAI,CAChD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEK,CAAE,SAAAG,EAAU,SAAAC,CAAU,EAAGH,EAEzBI,EAAM,4BAA4BH,CAAM,GAE9C,MAAMG,CAAG,EACN,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM1B,EAAS,cAGjB,OAAO0B,EAAS,MACtB,CAAK,EACA,KAAKC,GAAU,CACd,GAAIA,EAAO,MAAQ,EAAG,CACpBC,EAAS,MAAM3B,EAAgB,aAAa,EAC5CsB,EAAS,OAAM,EACf,MACD,CAEDC,EAAS,UAAYnB,EAAYsB,EAAO,IAAI,EAC5CJ,EAAS,OAAM,EAEXL,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIW,EAAe,sBAAuB,CACnD,SAAU,GACV,aAAc,MACd,gBAAiB,SACjB,aAAc,GACxB,CAAS,CAET,CAAK,EACA,MAAOC,GAAU,CAChB,QAAQ,IAAIA,CAAK,EACjBF,EAAS,MAAM3B,EAAgB,aAAa,EAC5CsB,EAAS,OAAM,CACrB,CAAK,CACL,CChDA,SAAS,iBAAiB,mBAAoBQ,GAAS,CACrD,MAAMC,EAAS,SAAS,cAAc,cAAc,EAC9CT,EAAWrB,EAAUF,EAAS,OAAO,EACrCwB,EAAW,SAAS,cAAc,SAAS,EAEjDQ,EAAO,iBAAiB,SAAUD,GAAS,CACzCA,EAAM,eAAc,EACpB,MAAMX,EAAeY,EAAO,cAAc,sBAAsB,EAAE,MAClER,EAAS,UAAY,GACrBQ,EAAO,MAAMT,CAAQ,EAErBJ,EAAaC,EAAc,CACzB,SAAUG,EACV,SAAUC,CAChB,CAAK,EAEDQ,EAAO,MAAK,CAChB,CAAG,CACH,CAAC"}